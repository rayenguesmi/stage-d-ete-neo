<div class="dashboard-container">
  <div class="header">
    <h1>Tableau de Bord - Chef de Projet</h1>
    <p class="subtitle">Vue d'ensemble de vos projets et équipes</p>
  </div>

  <!-- Cartes de statistiques -->
  <div class="stats-grid">
    <div class="stat-card projet1">
      <div class="stat-icon">
        <i class="fas fa-folder"></i>
      </div>
      <div class="stat-content">
        <h3>Neolians</h3>
        <p class="stat-number">{{ assignedUsersProjet1.length }}</p>
        <p class="stat-label">Utilisateurs assignés</p>
      </div>
    </div>

    <div class="stat-card projet2">
      <div class="stat-icon">
        <i class="fas fa-folder"></i>
      </div>
      <div class="stat-content">
        <h3>Vaudoise</h3>
        <p class="stat-number">{{ assignedUsersProjet2.length }}</p>
        <p class="stat-label">Utilisateurs assignés</p>
      </div>
    </div>

    <div class="stat-card total">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3>Total</h3>
        <p class="stat-number">{{ getTotalAssignedUsers() }}</p>
        <p class="stat-label">Utilisateurs gérés</p>
      </div>
    </div>

    <div class="stat-card available">
      <div class="stat-icon">
        <i class="fas fa-user-plus"></i>
      </div>
      <div class="stat-content">
        <h3>Disponibles</h3>
        <p class="stat-number">{{ getAvailableUsersCount() }}</p>
        <p class="stat-label">Utilisateurs disponibles</p>
      </div>
    </div>
  </div>

  <!-- Section de gestion des assignations -->
  <div class="assignment-management">
    <h2>Gestion des Assignations</h2>
    
    <!-- Utilisateurs disponibles -->
    <div class="available-users" *ngIf="getAvailableUsers().length > 0">
      <h3>Utilisateurs Disponibles</h3>
      <div class="users-grid">
        <div class="user-card" *ngFor="let user of getAvailableUsers()">
          <div class="user-info">
            <div class="user-avatar">
              <i class="fas fa-user"></i>
            </div>
            <div class="user-details">
              <span class="user-name">{{ user.firstName }} {{ user.lastName }}</span>
              <span class="user-email">{{ user.email }}</span>
              <span class="user-role">{{ user.role }}</span>
            </div>
          </div>
          <div class="user-actions">
            <button class="btn-assign neolians" (click)="assignUserToNeolians(user)">
              <i class="fas fa-plus"></i>
              Assigner à Neolians
            </button>
            <button class="btn-assign vaudoise" (click)="assignUserToVaudoise(user)">
              <i class="fas fa-plus"></i>
              Assigner à Vaudoise
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="quick-actions">
    <h2>Actions Rapides</h2>
    <div class="actions-grid">
      <button class="action-btn reset" (click)="resetAllAssignments()">
        <i class="fas fa-undo"></i>
        <span>Réinitialiser les Assignations</span>
      </button>
      
      <button class="action-btn view" routerLink="/chef-proj/view-assignments">
        <i class="fas fa-list-ul"></i>
        <span>Voir les Assignations</span>
      </button>
      
      <button class="action-btn reports" routerLink="/chef-proj/reports">
        <i class="fas fa-chart-bar"></i>
        <span>Rapports</span>
      </button>
    </div>
  </div>

  <!-- Vue d'ensemble des projets -->
  <div class="projects-overview">
    <h2>Vue d'Ensemble des Projets</h2>
    <div class="projects-grid">
      <!-- Neolians -->
      <div class="project-card">
        <div class="project-header">
          <h3>
            <i class="fas fa-folder"></i>
            Neolians
          </h3>
          <span class="project-status active">Actif</span>
        </div>
        
        <div class="project-stats">
          <div class="project-stat">
            <span class="stat-value">{{ assignedUsersProjet1.length }}</span>
            <span class="stat-label">Membres</span>
          </div>
          <div class="project-stat">
            <span class="stat-value">75%</span>
            <span class="stat-label">Progression</span>
          </div>
        </div>

        <div class="project-team">
          <h4>Équipe assignée</h4>
          <div class="team-members" *ngIf="assignedUsersProjet1.length > 0; else noMembers1">
            <div class="member" *ngFor="let user of assignedUsersProjet1">
              <div class="member-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="member-info">
                <span class="member-name">{{ user.firstName }} {{ user.lastName }}</span>
                <span class="member-role">{{ user.role }}</span>
              </div>
              <div class="member-actions">
                <button class="btn-remove" (click)="unassignUserFromNeolians(user)" title="Retirer du projet">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
          <ng-template #noMembers1>
            <p class="no-members">Aucun membre assigné</p>
          </ng-template>
        </div>

        <div class="project-actions">
          <button class="btn-secondary" routerLink="/chef-proj/progress-projet1">
            <i class="fas fa-chart-line"></i>
            Voir le progrès
          </button>
        </div>
      </div>

      <!-- Vaudoise -->
      <div class="project-card">
        <div class="project-header">
          <h3>
            <i class="fas fa-folder"></i>
            Vaudoise
          </h3>
          <span class="project-status active">Actif</span>
        </div>
        
        <div class="project-stats">
          <div class="project-stat">
            <span class="stat-value">{{ assignedUsersProjet2.length }}</span>
            <span class="stat-label">Membres</span>
          </div>
          <div class="project-stat">
            <span class="stat-value">45%</span>
            <span class="stat-label">Progression</span>
          </div>
        </div>

        <div class="project-team">
          <h4>Équipe assignée</h4>
          <div class="team-members" *ngIf="assignedUsersProjet2.length > 0; else noMembers2">
            <div class="member" *ngFor="let user of assignedUsersProjet2">
              <div class="member-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="member-info">
                <span class="member-name">{{ user.firstName }} {{ user.lastName }}</span>
                <span class="member-role">{{ user.role }}</span>
              </div>
              <div class="member-actions">
                <button class="btn-remove" (click)="unassignUserFromVaudoise(user)" title="Retirer du projet">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
          <ng-template #noMembers2>
            <p class="no-members">Aucun membre assigné</p>
          </ng-template>
        </div>

        <div class="project-actions">
          <button class="btn-secondary" routerLink="/chef-proj/progress-projet2">
            <i class="fas fa-chart-line"></i>
            Voir le progrès
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Activités récentes -->
  <div class="recent-activities">
    <h2>Activités Récentes</h2>
    <div class="activities-list">
      <div class="activity-item" *ngFor="let activity of recentActivities">
        <div class="activity-icon" [class]="activity.type">
          <i class="fas" [class]="activity.icon"></i>
        </div>
        <div class="activity-content">
          <p class="activity-text">{{ activity.text }}</p>
          <span class="activity-time">{{ activity.time }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

