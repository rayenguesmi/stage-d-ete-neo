<div class="assign-users-container">
  <div class="header">
    <h1>Assignation d'Utilisateurs aux Projets</h1>
    <p class="subtitle">Gérez les assignations des utilisateurs aux projets 1 et 2</p>
  </div>

  <!-- Section de sélection du projet -->
  <div class="project-selection">
    <h2>Sélectionner le Projet</h2>
    <div class="project-buttons">
      <button 
        class="project-btn" 
        [class.active]="selectedProject === 'projet1'"
        (click)="selectProject('projet1')">
        <i class="fas fa-folder"></i>
        Neolians
      </button>
      <button 
        class="project-btn" 
        [class.active]="selectedProject === 'projet2'"
        (click)="selectProject('projet2')">
        <i class="fas fa-folder"></i>
        Vaudoise
      </button>
    </div>
  </div>

  <!-- Section d'assignation -->
  <div class="assignment-section" *ngIf="selectedProject">
    <div class="section-header">
      <h2>Assigner des Utilisateurs au {{ selectedProject === 'projet1' ? 'Neolians' : 'Vaudoise' }}</h2>
      <button class="refresh-btn" (click)="loadUsers()">
        <i class="fas fa-sync-alt"></i>
        Actualiser
      </button>
    </div>

    <!-- Liste des utilisateurs disponibles -->
    <div class="users-grid">
      <div class="available-users">
        <h3>Utilisateurs Disponibles</h3>
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input 
            type="text" 
            placeholder="Rechercher un utilisateur..."
            [(ngModel)]="searchTerm"
            (input)="filterUsers()">
        </div>
        
        <div class="users-list">
          <div 
            class="user-card" 
            *ngFor="let user of filteredAvailableUsers"
            (click)="assignUser(user)">
            <div class="user-info">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="user-details">
                <h4>{{ user.firstName }} {{ user.lastName }}</h4>
                <p>{{ user.email }}</p>
                <span class="user-role">{{ user.role }}</span>
              </div>
            </div>
            <button class="assign-btn">
              <i class="fas fa-plus"></i>
              Assigner
            </button>
          </div>
        </div>
      </div>

      <!-- Liste des utilisateurs assignés -->
      <div class="assigned-users">
        <h3>Utilisateurs Assignés au {{ selectedProject === 'projet1' ? 'Neolians' : 'Vaudoise' }}</h3>
        
        <div class="users-list">
          <div 
            class="user-card assigned" 
            *ngFor="let user of getAssignedUsers()">
            <div class="user-info">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="user-details">
                <h4>{{ user.firstName }} {{ user.lastName }}</h4>
                <p>{{ user.email }}</p>
                <span class="user-role">{{ user.role }}</span>
              </div>
            </div>
            <button class="unassign-btn" (click)="unassignUser(user)">
              <i class="fas fa-times"></i>
              Retirer
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Section de résumé des assignations -->
  <div class="summary-section">
    <h2>Résumé des Assignations</h2>
    <div class="summary-cards">
      <div class="summary-card">
        <div class="card-icon projet1">
          <i class="fas fa-folder"></i>
        </div>
        <div class="card-content">
          <h3>Neolians</h3>
          <p class="count">{{ assignedUsersProjet1.length }} utilisateur(s) assigné(s)</p>
        </div>
      </div>
      
      <div class="summary-card">
        <div class="card-icon projet2">
          <i class="fas fa-folder"></i>
        </div>
        <div class="card-content">
          <h3>Vaudoise</h3>
          <p class="count">{{ assignedUsersProjet2.length }} utilisateur(s) assigné(s)</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Messages de notification -->
  <div class="notification" *ngIf="notification" [class]="notification.type">
    <i class="fas" [class.fa-check-circle]="notification.type === 'success'" 
                   [class.fa-exclamation-triangle]="notification.type === 'error'"></i>
    {{ notification.message }}
  </div>
</div>

