<div class="app-container">
  <div class="sidebar">
    <h2>Vaudoise TM</h2>
    <a routerLink="/chef-vaudoise/dashboard" routerLinkActive="active" [class.active]="currentView === 'home'" (click)="setCurrentView('home')">
      <i class="fas fa-home icon"></i> Tableau de Bord 
    </a>

    <!-- Menu déroulant Gestion Projets -->
    <div class="sidebar-group">
      <button class="sidebar-dropdown" (click)="toggleDropdown('projets')">
        <i class="fas fa-project-diagram icon"></i> Gestion Projets
        <i class="fas fa-chevron-down dropdown-arrow"></i>
      </button>
      <div class="sidebar-submenu" [class.open]="dropdowns['projets']">
        <a routerLink="/chef-vaudoise/vaudoise" routerLinkActive="active" [class.active]="currentView === 'vaudoise'" (click)="setCurrentView('vaudoise')">
          <i class="fas fa-folder icon"></i> Vaudoise
        </a>
      </div>
    </div>

    <!-- Menu déroulant Assignation Utilisateurs -->
    <div class="sidebar-group">
      <button class="sidebar-dropdown" (click)="toggleDropdown('assignation')">
        <i class="fas fa-users-cog icon"></i> Assignation Utilisateurs
        <i class="fas fa-chevron-down dropdown-arrow"></i>
      </button>
      <div class="sidebar-submenu" [class.open]="dropdowns['assignation']">
        <a routerLink="/chef-vaudoise/assign-vaudoise" routerLinkActive="active" [class.active]="currentView === 'assign-vaudoise'" (click)="setCurrentView('assign-vaudoise')">
          <i class="fas fa-user-plus icon"></i> Assigner au Vaudoise
        </a>
        <a routerLink="/chef-vaudoise/view-assignments" routerLinkActive="active" [class.active]="currentView === 'view-assignments'" (click)="setCurrentView('view-assignments')">
          <i class="fas fa-list-ul icon"></i> Voir les Assignations
        </a>
      </div>
    </div>

    <!-- Menu déroulant Équipes -->
    <div class="sidebar-group">
      <button class="sidebar-dropdown" (click)="toggleDropdown('equipes')">
        <i class="fas fa-users icon"></i> Gestion Équipes
        <i class="fas fa-chevron-down dropdown-arrow"></i>
      </button>
      <div class="sidebar-submenu" [class.open]="dropdowns['equipes']">
        <a routerLink="/chef-vaudoise/equipe-vaudoise" routerLinkActive="active" [class.active]="currentView === 'equipe-vaudoise'" (click)="setCurrentView('equipe-vaudoise')">
          <i class="fas fa-users icon"></i> Équipe Vaudoise
        </a>
      </div>
    </div>

    <!-- Menu déroulant Suivi & Rapports -->
    <div class="sidebar-group">
      <button class="sidebar-dropdown" (click)="toggleDropdown('suivi')">
        <i class="fas fa-chart-line icon"></i> Suivi & Rapports
        <i class="fas fa-chevron-down dropdown-arrow"></i>
      </button>
      <div class="sidebar-submenu" [class.open]="dropdowns['suivi']">
        <a routerLink="/chef-vaudoise/progress-vaudoise" routerLinkActive="active" [class.active]="currentView === 'progress-vaudoise'" (click)="setCurrentView('progress-vaudoise')">
          <i class="fas fa-chart-bar icon"></i> Progrès Vaudoise
        </a>
        <a routerLink="/chef-vaudoise/reports" routerLinkActive="active" [class.active]="currentView === 'reports'" (click)="setCurrentView('reports')">
          <i class="fas fa-file-alt icon"></i> Rapports
        </a>
      </div>
    </div>

    <!-- Menu déroulant Planification -->
    <div class="sidebar-group">
      <button class="sidebar-dropdown" (click)="toggleDropdown('planification')">
        <i class="fas fa-calendar-alt icon"></i> Planification
        <i class="fas fa-chevron-down dropdown-arrow"></i>
      </button>
      <div class="sidebar-submenu" [class.open]="dropdowns['planification']">
        <a routerLink="/chef-vaudoise/calendar" routerLinkActive="active" [class.active]="currentView === 'calendar'" (click)="setCurrentView('calendar')">
          <i class="fas fa-calendar icon"></i> Calendrier
        </a>
        <a routerLink="/chef-vaudoise/milestones" routerLinkActive="active" [class.active]="currentView === 'milestones'" (click)="setCurrentView('milestones')">
          <i class="fas fa-flag icon"></i> Jalons
        </a>
        <a routerLink="/chef-vaudoise/deadlines" routerLinkActive="active" [class.active]="currentView === 'deadlines'" (click)="setCurrentView('deadlines')">
          <i class="fas fa-clock icon"></i> Échéances
        </a>
      </div>
    </div>
  </div>

  <div class="main">
    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

<!-- User info and logout -->
<div class="user-info">
  <div class="user-details">
    <span class="user-name">{{ getUserName() }}</span>
    <span class="user-email">{{ getUserEmail() }}</span>
    <span class="user-role">Chef Vaudoise</span>
  </div>
  <button class="logout-btn" (click)="logout()">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
  </button>
</div>
